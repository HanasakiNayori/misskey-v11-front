(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1108:function(t,e,s){"use strict";s.r(e);var i=s(0),a=s(3),r=s(19),o=s(319),n=s(702),u=i.default.extend({i18n:Object(a.a)("deck/deck.user-column.vue"),components:{XColumn:o.a},data:()=>({user:null,fetching:!0}),computed:{bannerStyle(){return null==this.user?{}:null==this.user.bannerUrl?{}:{backgroundColor:this.user.bannerColor,backgroundImage:`url(${this.user.bannerUrl})`}}},watch:{$route:"fetch"},created(){this.fetch()},methods:{fetch(){this.fetching=!0,this.$root.api("users/show",Object(r.a)(this.$route.params.user)).then(t=>{this.user=t,this.fetching=!1})},menu(){const t=this.$root.new(n.a,{source:this.$refs.menu,user:this.user});this.$once("hook:beforeDestroy",()=>{t.destroyDom()})}}}),d=(s(832),s(1)),l=Object(d.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("x-column",{scopedSlots:t._u([{key:"header",fn:function(){return[s("fa",{attrs:{icon:"user"}}),t.user?s("mk-user-name",{key:t.user.id,attrs:{user:t.user}}):t._e()]},proxy:!0}])},[t.user?s("div",{staticClass:"zubukjlciycdsyynicqrnlsmdwmymzqu"},[null!=t.user.host?s("div",{staticClass:"is-remote"},[s("details",[s("summary",[s("fa",{attrs:{icon:"exclamation-triangle"}}),t._v(" "+t._s(t.$t("@.is-remote-user")))],1),s("a",{attrs:{href:t.user.url,rel:"nofollow noopener",target:"_blank"}},[t._v(t._s(t.$t("@.view-on-remote")))])])]):t._e(),s("header",{style:t.bannerStyle},[s("div",[s("button",{ref:"menu",staticClass:"menu",on:{click:t.menu}},[s("fa",{attrs:{icon:"ellipsis-h"}})],1),t.$store.getters.isSignedIn&&t.user.id!=t.$store.state.i.id?s("mk-follow-button",{staticClass:"follow",attrs:{user:t.user,mini:""}}):t._e(),s("mk-avatar",{key:t.user.id,staticClass:"avatar",attrs:{user:t.user,"disable-preview":!0}}),s("router-link",{staticClass:"name",attrs:{to:t._f("userPage")(t.user)}},[s("mk-user-name",{key:t.user.id,attrs:{user:t.user,nowrap:!1}})],1),s("span",{staticClass:"acct"},[t._v("@"+t._s(t._f("acct")(t.user))+" "),1==t.user.isLocked?s("fa",{staticClass:"locked",attrs:{icon:"lock","fixed-width":""}}):t._e()],1),t.user.isFollowed?s("span",{staticClass:"followed"},[t._v(t._s(t.$t("follows-you")))]):t._e()],1)]),s("div",{staticClass:"info"},[s("div",{staticClass:"description"},[t.user.description?s("mfm",{key:t.user.id,attrs:{text:t.user.description,"is-note":!1,author:t.user,i:t.$store.state.i,"custom-emojis":t.user.emojis}}):t._e()],1),t.user.fields?s("div",{key:t.user.id,staticClass:"fields"},t._l(t.user.fields,(function(e,i){return s("dl",{key:i,staticClass:"field"},[s("dt",{staticClass:"name"},[s("mfm",{attrs:{text:e.name,plain:!0,"custom-emojis":t.user.emojis}})],1),s("dd",{staticClass:"value"},[s("mfm",{attrs:{text:e.value,author:t.user,i:t.$store.state.i,"custom-emojis":t.user.emojis}})],1)])})),0):t._e(),s("div",{staticClass:"counts"},[s("div",[s("router-link",{attrs:{to:t._f("userPage")(t.user)}},[s("b",[t._v(t._s(t._f("number")(t.user.notesCount)))]),s("span",[t._v(t._s(t.$t("posts")))])])],1),s("div",[s("router-link",{attrs:{to:t._f("userPage")(t.user,"following")}},[s("b",[t._v(t._s(t._f("number")(t.user.followingCount)))]),s("span",[t._v(t._s(t.$t("following")))])])],1),s("div",[s("router-link",{attrs:{to:t._f("userPage")(t.user,"followers")}},[s("b",[t._v(t._s(t._f("number")(t.user.followersCount)))]),s("span",[t._v(t._s(t.$t("followers")))])])],1)])]),s("router-view",{attrs:{user:t.user}})],1):t._e()])}),[],!1,null,"1ab4a802",null);e.default=l.exports},702:function(t,s,i){"use strict";var a=i(0),r=i(3),o=i(2),n=i(8),u=a.default.extend({i18n:Object(r.a)("common/views/components/user-menu.vue"),props:["user","source"],data(){let t=[{icon:["fas","at"],text:this.$t("mention"),action:()=>{this.$post({mention:this.user})}},null,{icon:["fas","list"],text:this.$t("push-to-list"),action:this.pushList}];return this.$store.getters.isSignedIn&&this.$store.state.i.id!=this.user.id&&(t=t.concat([null,{icon:this.user.isMuted?["fas","eye"]:["far","eye-slash"],text:this.user.isMuted?this.$t("unmute"):this.$t("mute"),action:this.toggleMute},{icon:"ban",text:this.user.isBlocking?this.$t("unblock"):this.$t("block"),action:this.toggleBlock},null,{icon:o.gb,text:this.$t("report-abuse"),action:this.reportAbuse}])),this.$store.getters.isSignedIn&&(this.$store.state.i.isAdmin||this.$store.state.i.isModerator)&&(t=t.concat([null,{icon:o.cc,text:this.user.isSilenced?this.$t("unsilence"):this.$t("silence"),action:this.toggleSilence},{icon:n.C,text:this.user.isSuspended?this.$t("unsuspend"):this.$t("suspend"),action:this.toggleSuspend}])),{items:t}},methods:{closed(){this.$nextTick(()=>{this.destroyDom()})},async pushList(){const t=this.$t("select-list"),e=await this.$root.api("users/lists/list"),{canceled:s,result:i}=await this.$root.dialog({type:null,title:t,select:{items:e.map(t=>({value:t.id,text:t.name}))},showCancelButton:!0});s||(await this.$root.api("users/lists/push",{listId:i,userId:this.user.id}),this.$root.dialog({type:"success",splash:!0}))},async toggleMute(){if(this.user.isMuted){if(!await this.getConfirmed(this.$t("unmute-confirm")))return;this.$root.api("mute/delete",{userId:this.user.id}).then(()=>{this.user.isMuted=!1},()=>{this.$root.dialog({type:"error",text:e})})}else{if(!await this.getConfirmed(this.$t("mute-confirm")))return;this.$root.api("mute/create",{userId:this.user.id}).then(()=>{this.user.isMuted=!0},()=>{this.$root.dialog({type:"error",text:e})})}},async toggleBlock(){if(this.user.isBlocking){if(!await this.getConfirmed(this.$t("unblock-confirm")))return;this.$root.api("blocking/delete",{userId:this.user.id}).then(()=>{this.user.isBlocking=!1},()=>{this.$root.dialog({type:"error",text:e})})}else{if(!await this.getConfirmed(this.$t("block-confirm")))return;this.$root.api("blocking/create",{userId:this.user.id}).then(()=>{this.user.isBlocking=!0},()=>{this.$root.dialog({type:"error",text:e})})}},async reportAbuse(){const t=this.$t("report-abuse-reported"),{canceled:e,result:s}=await this.$root.dialog({title:this.$t("report-abuse-detail"),input:!0});e||this.$root.api("users/report-abuse",{userId:this.user.id,comment:s}).then(()=>{this.$root.dialog({type:"success",text:t})},t=>{this.$root.dialog({type:"error",text:t})})},async toggleSilence(){await this.getConfirmed(this.$t(this.user.isSilenced?"unsilence-confirm":"silence-confirm"))&&this.$root.api(this.user.isSilenced?"admin/unsilence-user":"admin/silence-user",{userId:this.user.id}).then(()=>{this.user.isSilenced=!this.user.isSilenced,this.$root.dialog({type:"success",splash:!0})},t=>{this.$root.dialog({type:"error",text:t})})},async toggleSuspend(){await this.getConfirmed(this.$t(this.user.isSuspended?"unsuspend-confirm":"suspend-confirm"))&&this.$root.api(this.user.isSuspended?"admin/unsuspend-user":"admin/suspend-user",{userId:this.user.id}).then(()=>{this.user.isSuspended=!this.user.isSuspended,this.$root.dialog({type:"success",splash:!0})},t=>{this.$root.dialog({type:"error",text:t})})},async getConfirmed(t){return!(await this.$root.dialog({type:"warning",showCancelButton:!0,title:"confirm",text:t})).canceled}}}),d=i(1),l=Object(d.a)(u,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{position:"initial"}},[e("mk-menu",{attrs:{source:this.source,items:this.items},on:{closed:this.closed}})],1)}),[],!1,null,null,null);s.a=l.exports},712:function(t,e,s){var i=s(833);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,s(5).default)("b026285e",i,!0,{})},832:function(t,e,s){"use strict";var i=s(712);s.n(i).a},833:function(t,e,s){(e=s(4)(!1)).push([t.i,'.zubukjlciycdsyynicqrnlsmdwmymzqu[data-v-1ab4a802]{background:var(--deckColumnBg)}.zubukjlciycdsyynicqrnlsmdwmymzqu>.is-remote[data-v-1ab4a802]{padding:8px 16px;font-size:12px}.zubukjlciycdsyynicqrnlsmdwmymzqu>.is-remote.is-remote[data-v-1ab4a802]{color:var(--remoteInfoFg);background:var(--remoteInfoBg)}.zubukjlciycdsyynicqrnlsmdwmymzqu>.is-remote>a[data-v-1ab4a802]{font-weight:700}.zubukjlciycdsyynicqrnlsmdwmymzqu>header[data-v-1ab4a802]{overflow:hidden;background-size:cover;background-position:50%}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div[data-v-1ab4a802]{padding:32px;background:rgba(0,0,0,.5);color:#fff;text-align:center}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.menu[data-v-1ab4a802]{position:absolute;top:8px;left:8px;padding:8px;font-size:16px;text-shadow:0 0 8px #000}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.follow[data-v-1ab4a802]{position:absolute;top:16px;right:16px}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.avatar[data-v-1ab4a802]{display:block;width:64px;height:64px;margin:0 auto}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.name[data-v-1ab4a802]{display:block;margin-top:8px;font-weight:700;text-shadow:0 0 8px #000;color:#fff}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.acct[data-v-1ab4a802]{display:block;font-size:14px;opacity:.7;text-shadow:0 0 8px #000}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.acct>.locked[data-v-1ab4a802]{opacity:.8}.zubukjlciycdsyynicqrnlsmdwmymzqu>header>div>.followed[data-v-1ab4a802]{display:inline-block;font-size:12px;background:rgba(0,0,0,.5);opacity:.7;margin-top:2px;padding:4px;border-radius:4px}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info[data-v-1ab4a802]{padding:16px;font-size:12px;color:var(--text);text-align:center;background:var(--face)}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info[data-v-1ab4a802]:before{content:"";display:blcok;position:absolute;top:-32px;left:0;right:0;width:0;margin:0 auto;border:16px solid transparent;border-bottom:16px solid var(--face)}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.fields[data-v-1ab4a802]{margin-top:8px}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.fields>.field[data-v-1ab4a802]{display:flex;padding:0;margin:0;align-items:center}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.fields>.field>.name[data-v-1ab4a802]{padding:4px;margin:4px;width:30%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-weight:700}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.fields>.field>.value[data-v-1ab4a802]{padding:4px;margin:4px;width:70%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.counts[data-v-1ab4a802]{display:grid;grid-template-columns:2fr 2fr 2fr;margin-top:8px;border-top:solid var(--lineWidth) var(--faceDivider)}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.counts>div[data-v-1ab4a802]{padding:8px 8px 0;text-align:center}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.counts>div>a[data-v-1ab4a802]{color:var(--text)}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.counts>div>a>b[data-v-1ab4a802]{display:block;font-size:110%}.zubukjlciycdsyynicqrnlsmdwmymzqu>.info>.counts>div>a>span[data-v-1ab4a802]{display:block;font-size:80%;opacity:.7}',""]),t.exports=e}}]);
//# sourceMappingURL=29.11.37.1.js.map