(window.webpackJsonp=window.webpackJsonp||[]).push([[51,41],{1100:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a(3),n=i.default.extend({i18n:Object(s.a)("desktop/views/pages/user/user.timeline.vue"),props:["user"],data(){return{fetching:!0,mode:"default",unreadCount:0,date:null,pagination:{endpoint:"users/notes",limit:10,params:e=>({userId:this.user.id,untilDate:e?void 0:this.date?this.date.getTime():void 0,includeReplies:"with-replies"==this.mode,includeMyRenotes:"my-posts"!=this.mode,withFiles:"with-media"==this.mode})}}},watch:{mode(){this.$refs.timeline.reload()}},mounted(){document.addEventListener("keydown",this.onDocumentKeydown),this.$root.$on("warp",this.warp),this.$once("hook:beforeDestroy",()=>{this.$root.$off("warp",this.warp),document.removeEventListener("keydown",this.onDocumentKeydown)})},methods:{onDocumentKeydown(e){"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&84==e.which&&this.$refs.timeline.focus()},warp(e){this.date=e,this.$refs.timeline.reload()}}}),r=(a(889),a(1)),o=Object(r.a)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("mk-notes",{ref:"timeline",attrs:{pagination:e.pagination},on:{inited:function(){return e.$emit("loaded")}},scopedSlots:e._u([{key:"header",fn:function(){return[a("header",{staticClass:"kugajpep"},[a("span",{attrs:{"data-active":"default"==e.mode},on:{click:function(t){e.mode="default"}}},[a("fa",{attrs:{icon:["far","comment-alt"]}}),e._v(" "+e._s(e.$t("default")))],1),a("span",{attrs:{"data-active":"with-replies"==e.mode},on:{click:function(t){e.mode="with-replies"}}},[a("fa",{attrs:{icon:"comments"}}),e._v(" "+e._s(e.$t("with-replies")))],1),a("span",{attrs:{"data-active":"with-media"==e.mode},on:{click:function(t){e.mode="with-media"}}},[a("fa",{attrs:{icon:["far","images"]}}),e._v(" "+e._s(e.$t("with-media")))],1),a("span",{attrs:{"data-active":"my-posts"==e.mode},on:{click:function(t){e.mode="my-posts"}}},[a("fa",{attrs:{icon:"user"}}),e._v(" "+e._s(e.$t("my-posts")))],1)])]},proxy:!0}])})],1)}),[],!1,null,"3b304a12",null).exports,d=a(20),c=a(12),l=i.default.extend({i18n:Object(s.a)("desktop/views/pages/user/user.photos.vue"),props:["user"],data:()=>({images:[],fetching:!0}),mounted(){const e=["image/jpeg","image/png","image/gif","image/apng","image/vnd.mozilla.apng"];this.$root.api("users/notes",{userId:this.user.id,fileType:e,excludeNsfw:!this.$store.state.device.alwaysShowNsfw,limit:9}).then(t=>{for(const e of t)for(const t of e.files)t._note=e;const a=Object(c.a)(t.map(e=>e.files));this.images=a.filter(t=>e.includes(t.type)).slice(0,9),this.fetching=!1})},methods:{thumbnail(e){return this.$store.state.device.disableShowingAnimatedImages?Object(d.a)(e.thumbnailUrl):e.thumbnailUrl}}}),u=(a(891),Object(r.a)(l,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersPhotos},on:{toggle:function(t){return e.$store.commit("device/set",{key:"expandUsersPhotos",value:t})}},scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:"camera"}}),e._v(" "+e._s(e.$t("title")))]},proxy:!0}])},[a("div",{staticClass:"dzsuvbsrrrwobdxifudxuefculdfiaxd"},[e.fetching?a("p",{staticClass:"initializing"},[a("fa",{attrs:{icon:"spinner",pulse:"","fixed-width":""}}),e._v(e._s(e.$t("loading"))),a("mk-ellipsis")],1):e._e(),!e.fetching&&e.images.length>0?a("div",{staticClass:"stream"},e._l(e.images,(function(t){return a("router-link",{key:t.id+":"+t._note.id,staticClass:"img",style:"background-image: url("+t.thumbnailUrl+")",attrs:{to:e._f("notePage")(t._note),title:t.name+"\n"+new Date(t.createdAt).toLocaleString()}})})),1):e._e(),e.fetching||0!=e.images.length?e._e():a("p",{staticClass:"empty"},[e._v(e._s(e.$t("no-photos")))])])])}),[],!1,null,"a53b550c",null).exports),p=a(814),f=a(806),m=i.default.extend({i18n:Object(s.a)(),components:{XTimeline:o,XPhotos:u,XActivity:p.default,XPage:f.default},props:{user:{type:Object,required:!0}},methods:{warp(e){this.$refs.tl.warp(e)}}}),h=(a(893),Object(r.a)(m,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lnctpgve"},[e.user.pinnedPage?a("x-page",{key:e.user.pinnedPage.id,attrs:{page:e.user.pinnedPage,"show-title":!e.user.pinnedPage.hideTitleWhenPinned}}):e._e(),e._l(e.user.pinnedNotes,(function(e){return a("mk-note-detail",{key:e.id,attrs:{note:e,compact:!0}})})),a("div",{staticClass:"activity"},[a("ui-container",{attrs:{"body-togglable":!0,expanded:e.$store.state.device.expandUsersActivity},on:{toggle:function(t){return e.$store.commit("device/set",{key:"expandUsersActivity",value:t})}},scopedSlots:e._u([{key:"header",fn:function(){return[a("fa",{attrs:{icon:"chart-bar"}}),e._v(e._s(e.$t("activity")))]},proxy:!0}])},[a("x-activity",{staticStyle:{padding:"16px"},attrs:{user:e.user,limit:35}})],1)],1),a("x-photos",{attrs:{user:e.user}}),a("x-timeline",{ref:"tl",attrs:{user:e.user}})],2)}),[],!1,null,"a5f28a3e",null));t.default=h.exports},742:function(e,t,a){var i=a(890);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(5).default)("573641a1",i,!0,{})},743:function(e,t,a){var i=a(892);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(5).default)("7d0cb306",i,!0,{})},744:function(e,t,a){var i=a(894);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,a(5).default)("27c67f22",i,!0,{})},814:function(e,t,a){"use strict";a.r(t);var i=a(0),s=a(130),n=i.default.extend({props:{user:{type:Object,required:!0},limit:{type:Number,required:!1,default:21}},data:()=>({fetching:!0,data:[],peak:null}),mounted(){this.$root.api("charts/user/notes",{userId:this.user.id,span:"day",limit:this.limit}).then(e=>{const t=[],a=[],i=[],n=new Date,r=n.getFullYear(),o=n.getMonth(),d=n.getDate();for(let s=0;s<this.limit;s++){const n=new Date(r,o,d-s);t.push([n,e.diffs.normal[s]]),a.push([n,e.diffs.reply[s]]),i.push([n,e.diffs.renote[s]])}new s.a(this.$refs.chart,{chart:{type:"bar",stacked:!0,height:100,sparkline:{enabled:!0}},plotOptions:{bar:{columnWidth:"80%"}},dataLabels:{enabled:!1},grid:{clipMarkers:!1,padding:{top:0,right:8,bottom:0,left:8}},tooltip:{shared:!0,intersect:!1},series:[{name:"Normal",data:t},{name:"Reply",data:a},{name:"Renote",data:i}],xaxis:{type:"datetime",crosshairs:{width:1,opacity:1}}}).render()})}}),r=a(1),o=Object(r.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"chart"})])}),[],!1,null,null,null);t.default=o.exports},889:function(e,t,a){"use strict";var i=a(742);a.n(i).a},890:function(e,t,a){(t=a(4)(!1)).push([e.i,'.kugajpep[data-v-3b304a12]{padding:0 8px;z-index:10;background:var(--faceHeader);box-shadow:0 1px var(--desktopTimelineHeaderShadow)}.kugajpep>span[data-v-3b304a12]{display:inline-block;padding:0 10px;line-height:42px;font-size:12px;user-select:none}.kugajpep>span[data-active][data-v-3b304a12]{color:var(--primary);cursor:default;font-weight:700}.kugajpep>span[data-active][data-v-3b304a12]:before{content:"";display:block;position:absolute;bottom:0;left:-8px;width:calc(100% + 16px);height:2px;background:var(--primary)}.kugajpep>span[data-v-3b304a12]:not([data-active]){color:var(--desktopTimelineSrc);cursor:pointer}.kugajpep>span[data-v-3b304a12]:not([data-active]):hover{color:var(--desktopTimelineSrcHover)}',""]),e.exports=t},891:function(e,t,a){"use strict";var i=a(743);a.n(i).a},892:function(e,t,a){(t=a(4)(!1)).push([e.i,".dzsuvbsrrrwobdxifudxuefculdfiaxd>.stream[data-v-a53b550c]{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px;padding:16px;background:var(--face)}.dzsuvbsrrrwobdxifudxuefculdfiaxd>.stream>*[data-v-a53b550c]{height:120px;background-position:50%;background-size:cover;background-clip:content-box;border-radius:4px}.dzsuvbsrrrwobdxifudxuefculdfiaxd>.empty[data-v-a53b550c],.dzsuvbsrrrwobdxifudxuefculdfiaxd>.initializing[data-v-a53b550c]{margin:0;padding:16px;text-align:center;color:var(--text)}.dzsuvbsrrrwobdxifudxuefculdfiaxd>.empty>i[data-v-a53b550c],.dzsuvbsrrrwobdxifudxuefculdfiaxd>.initializing>i[data-v-a53b550c]{margin-right:4px}",""]),e.exports=t},893:function(e,t,a){"use strict";var i=a(744);a.n(i).a},894:function(e,t,a){(t=a(4)(!1)).push([e.i,".lnctpgve>*[data-v-a5f28a3e]{margin-bottom:16px}",""]),e.exports=t}}]);
//# sourceMappingURL=51.11.37.1.js.map