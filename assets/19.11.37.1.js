(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1021:function(e,t,a){var s;s=function(e){e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),a=0;256!=a;++a)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=a)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[a]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();e.table=t,e.bstr=function(e,a){for(var s=-1^a,i=e.length-1,n=0;n<i;)s=(s=s>>>8^t[255&(s^e.charCodeAt(n++))])>>>8^t[255&(s^e.charCodeAt(n++))];return n===i&&(s=s>>>8^t[255&(s^e.charCodeAt(n))]),-1^s},e.buf=function(e,a){if(e.length>1e4)return function(e,a){for(var s=-1^a,i=e.length-7,n=0;n<i;)s=(s=(s=(s=(s=(s=(s=(s=s>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])];for(;n<i+7;)s=s>>>8^t[255&(s^e[n++])];return-1^s}(e,a);for(var s=-1^a,i=e.length-3,n=0;n<i;)s=(s=(s=(s=s>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])])>>>8^t[255&(s^e[n++])];for(;n<i+3;)s=s>>>8^t[255&(s^e[n++])];return-1^s},e.str=function(e,a){for(var s,i,n=-1^a,r=0,o=e.length;r<o;)(s=e.charCodeAt(r++))<128?n=n>>>8^t[255&(n^s)]:s<2048?n=(n=n>>>8^t[255&(n^(192|s>>6&31))])>>>8^t[255&(n^(128|63&s))]:s>=55296&&s<57344?(s=64+(1023&s),i=1023&e.charCodeAt(r++),n=(n=(n=(n=n>>>8^t[255&(n^(240|s>>8&7))])>>>8^t[255&(n^(128|s>>2&63))])>>>8^t[255&(n^(128|i>>6&15|(3&s)<<4))])>>>8^t[255&(n^(128|63&i))]):n=(n=(n=n>>>8^t[255&(n^(224|s>>12&15))])>>>8^t[255&(n^(128|s>>6&63))])>>>8^t[255&(n^(128|63&s))];return-1^n}},"undefined"==typeof DO_NOT_EXPORT_CRC?s(t):s({})},1022:function(e,t,a){"use strict";var s=a(771);a.n(s).a},1023:function(e,t,a){(t=a(4)(!1)).push([e.i,".xqnhankfuuilcwvhgsopeqncafzsquya[data-v-b4c25402]{text-align:center}.xqnhankfuuilcwvhgsopeqncafzsquya>.go-index[data-v-b4c25402]{position:absolute;top:0;left:0;z-index:1;width:42px;height:42px}.xqnhankfuuilcwvhgsopeqncafzsquya>header[data-v-b4c25402]{padding:8px;border-bottom:1px dashed var(--reversiGameHeaderLine)}.xqnhankfuuilcwvhgsopeqncafzsquya>header a[data-v-b4c25402]{color:inherit}.xqnhankfuuilcwvhgsopeqncafzsquya>.board[data-v-b4c25402]{width:calc(100% - 16px);max-width:500px;margin:0 auto}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x[data-v-b4c25402]{height:16px;padding:0 16px;display:flex}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x>*[data-v-b4c25402]{flex:1;display:flex;align-items:center;justify-content:center;font-size:12px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x[data-v-b4c25402]>:first-child{margin-left:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.labels-x[data-v-b4c25402]>:last-child{margin-right:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex[data-v-b4c25402]{display:flex}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y[data-v-b4c25402]{width:16px;display:flex;flex-direction:column}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y>*[data-v-b4c25402]{flex:1;display:flex;align-items:center;justify-content:center;font-size:12px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y[data-v-b4c25402]>:first-child{margin-top:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.labels-y[data-v-b4c25402]>:last-child{margin-bottom:-2px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells[data-v-b4c25402]{flex:1;display:grid;grid-gap:4px}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div[data-v-b4c25402]{background:transparent;border-radius:6px;overflow:hidden}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div *[data-v-b4c25402]{pointer-events:none;user-select:none}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty[data-v-b4c25402]{border:2px solid var(--reversiGameEmptyCell)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.can[data-v-b4c25402]{background:var(--reversiGameEmptyCell)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn[data-v-b4c25402]{border-color:var(--reversiGameEmptyCellMyTurn)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn.can[data-v-b4c25402]{background:var(--reversiGameEmptyCellCanPut);cursor:pointer}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn.can[data-v-b4c25402]:hover{border-color:var(--primaryDarken10);background:var(--primary)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.empty.myTurn.can[data-v-b4c25402]:active{background:var(--primaryDarken10)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.prev[data-v-b4c25402]{box-shadow:0 0 0 4px var(--primaryAlpha07)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.isEnded[data-v-b4c25402]{border-color:var(--reversiGameEmptyCellMyTurn)}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div.none[data-v-b4c25402]{border-color:transparent!important}.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div>img[data-v-b4c25402],.xqnhankfuuilcwvhgsopeqncafzsquya>.board>.flex>.cells>div>svg[data-v-b4c25402]{display:block;width:100%;height:100%}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph[data-v-b4c25402]{display:grid;grid-template-columns:repeat(61,1fr);width:300px;height:38px;margin:0 auto 16px}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph>div[data-v-b4c25402]:not(:empty){background:#ccc}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph>div>div[data-v-b4c25402]:first-child{background:#333}.xqnhankfuuilcwvhgsopeqncafzsquya>.graph>div>div[data-v-b4c25402]:last-child{background:#ccc}.xqnhankfuuilcwvhgsopeqncafzsquya>.status[data-v-b4c25402]{margin:0;padding:16px 0}.xqnhankfuuilcwvhgsopeqncafzsquya>.actions[data-v-b4c25402]{padding-bottom:16px}.xqnhankfuuilcwvhgsopeqncafzsquya>.player[data-v-b4c25402]{padding:0 16px 32px;margin:0 auto;max-width:500px}.xqnhankfuuilcwvhgsopeqncafzsquya>.player>span[data-v-b4c25402]{display:inline-block;margin:0 8px;min-width:70px}",""]),e.exports=t},1024:function(e,t,a){"use strict";var s=a(772);a.n(s).a},1025:function(e,t,a){(t=a(4)(!1)).push([e.i,".urbixznjwwuukfsckrwzwsqzsxornqij[data-v-6947c1ac]{text-align:center;background:var(--bg)}.urbixznjwwuukfsckrwzwsqzsxornqij>header[data-v-6947c1ac]{padding:8px;border-bottom:1px dashed #c4cdd4}.urbixznjwwuukfsckrwzwsqzsxornqij>div[data-v-6947c1ac]{padding:0 16px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card[data-v-6947c1ac]{margin:0 auto 16px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-6947c1ac]{width:100%;padding:12px 14px;background:var(--face);border:1px solid var(--reversiMapSelectBorder);border-radius:4px;color:var(--text);cursor:pointer;transition:border-color .2s cubic-bezier(.645,.045,.355,1);-webkit-appearance:none;-moz-appearance:none;appearance:none}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-6947c1ac]:hover{border-color:var(--reversiMapSelectHoverBorder)}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-6947c1ac]:active,.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>header>select[data-v-6947c1ac]:focus{border-color:var(--primary)}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.random[data-v-6947c1ac]{padding:32px 0;font-size:64px;color:var(--text);opacity:.7}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board[data-v-6947c1ac]{display:grid;grid-gap:4px;width:300px;height:300px;margin:0 auto;color:var(--text)}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board>div[data-v-6947c1ac]{background:transparent;border:2px solid var(--faceDivider);border-radius:6px;overflow:hidden;cursor:pointer}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board>div *[data-v-6947c1ac]{pointer-events:none;user-select:none;width:100%;height:100%}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.map>div>.board>div[data-none][data-v-6947c1ac]{border-color:transparent}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.form>div>.card+.card[data-v-6947c1ac]{margin-top:16px}.urbixznjwwuukfsckrwzwsqzsxornqij>div>.card.form>div input[type=range][data-v-6947c1ac]{width:100%}.urbixznjwwuukfsckrwzwsqzsxornqij>div .card[data-v-6947c1ac]{max-width:400px;border-radius:4px;background:var(--face);color:var(--text);box-shadow:0 2px 12px 0 var(--reversiRoomFormShadow)}.urbixznjwwuukfsckrwzwsqzsxornqij>div .card>header[data-v-6947c1ac]{padding:18px 20px;border-bottom:1px solid var(--faceDivider)}.urbixznjwwuukfsckrwzwsqzsxornqij>div .card>div[data-v-6947c1ac]{padding:20px;color:var(--text)}.urbixznjwwuukfsckrwzwsqzsxornqij>footer[data-v-6947c1ac]{position:sticky;bottom:0;padding:16px;background:var(--reversiRoomFooterBg);border-top:1px solid var(--faceDivider)}.urbixznjwwuukfsckrwzwsqzsxornqij>footer>.status[data-v-6947c1ac]{margin:0 0 16px}",""]),e.exports=t},1026:function(e,t,a){"use strict";var s=a(773);a.n(s).a},1027:function(e,t,a){(t=a(4)(!1)).push([e.i,".phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>h1[data-v-41d0f9a8]{margin:0;padding:24px;font-size:24px;text-align:center;font-weight:400;color:#fff;background:linear-gradient(180deg,var(--reversiBannerGradientStart),var(--reversiBannerGradientEnd))}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>h1+p[data-v-41d0f9a8]{padding:12px;margin:0 0 12px;text-align:center;font-size:14px;border-bottom:1px solid var(--faceDivider)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play[data-v-41d0f9a8]{margin:0 auto;padding:0 16px;max-width:500px;text-align:center}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play>details[data-v-41d0f9a8]{margin:8px 0}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>.play>details>div[data-v-41d0f9a8]{padding:16px;font-size:14px;text-align:left;background:var(--reversiDescBg);border-radius:8px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>section[data-v-41d0f9a8]{margin:0 auto;padding:0 16px 16px;max-width:500px;border-top:1px solid var(--faceDivider)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx>section>h2[data-v-41d0f9a8]{margin:0;padding:16px 0 8px;font-size:16px;font-weight:700}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-41d0f9a8]{margin:8px 0;padding:8px;color:var(--text);background:var(--face);box-shadow:0 2px 16px var(--reversiListItemShadow);border-radius:6px;cursor:pointer}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation *[data-v-41d0f9a8]{pointer-events:none;user-select:none}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-41d0f9a8]:focus{border-color:var(--primary)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-41d0f9a8]:hover{box-shadow:inset 0 0 0 100px rgba(0,0,0,.05)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation[data-v-41d0f9a8]:active{box-shadow:inset 0 0 0 100px rgba(0,0,0,.1)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation>.avatar[data-v-41d0f9a8]{width:32px;height:32px;border-radius:100%}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .invitation>span[data-v-41d0f9a8]{margin:0 8px;line-height:32px}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-41d0f9a8]{display:block;margin:8px 0;padding:8px;color:var(--text);background:var(--face);box-shadow:0 2px 16px var(--reversiListItemShadow);border-radius:6px;cursor:pointer}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game *[data-v-41d0f9a8]{pointer-events:none;user-select:none}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-41d0f9a8]:hover{box-shadow:inset 0 0 0 100px rgba(0,0,0,.05)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game[data-v-41d0f9a8]:active{box-shadow:inset 0 0 0 100px rgba(0,0,0,.1)}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game>.avatar[data-v-41d0f9a8]{width:32px;height:32px;border-radius:100%}.phgnkghfpyvkrvwiajkiuoxyrdaqpzcx .game>span[data-v-41d0f9a8]{margin:0 8px;line-height:32px}",""]),e.exports=t},1028:function(e,t,a){"use strict";var s=a(774);a.n(s).a},1029:function(e,t,a){(t=a(4)(!1)).push([e.i,".vchtoekanapleubgzioubdtmlkribzfd[data-v-380d0288]{color:var(--text);background:var(--bg)}.vchtoekanapleubgzioubdtmlkribzfd>.matching>h1[data-v-380d0288]{margin:0;padding:24px;font-size:20px;text-align:center;font-weight:400}.vchtoekanapleubgzioubdtmlkribzfd>.matching>.cancel[data-v-380d0288]{margin:0 auto;padding:24px 0 0;max-width:200px;text-align:center;border-top:1px dashed #c4cdd4}",""]),e.exports=t},1096:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"fourfour",(function(){return v})),a.d(s,"sixsix",(function(){return w})),a.d(s,"roundedSixsix",(function(){return f})),a.d(s,"roundedSixsix2",(function(){return x})),a.d(s,"eighteight",(function(){return y})),a.d(s,"eighteightH1",(function(){return k})),a.d(s,"eighteightH2",(function(){return _})),a.d(s,"eighteightH3",(function(){return q})),a.d(s,"eighteightH4",(function(){return z})),a.d(s,"eighteightH12",(function(){return $})),a.d(s,"eighteightH16",(function(){return C})),a.d(s,"eighteightH20",(function(){return j})),a.d(s,"eighteightH28",(function(){return P})),a.d(s,"roundedEighteight",(function(){return S})),a.d(s,"roundedEighteight2",(function(){return A})),a.d(s,"roundedEighteight3",(function(){return I})),a.d(s,"eighteightWithNotch",(function(){return E})),a.d(s,"eighteightWithSomeHoles",(function(){return T})),a.d(s,"circle",(function(){return U})),a.d(s,"smile",(function(){return B})),a.d(s,"window",(function(){return O})),a.d(s,"reserved",(function(){return L})),a.d(s,"x",(function(){return N})),a.d(s,"parallel",(function(){return D})),a.d(s,"lackOfBlack",(function(){return M})),a.d(s,"squareParty",(function(){return G})),a.d(s,"minesweeper",(function(){return R})),a.d(s,"tenthtenth",(function(){return H})),a.d(s,"hole",(function(){return X})),a.d(s,"grid",(function(){return F})),a.d(s,"cross",(function(){return W})),a.d(s,"charX",(function(){return J})),a.d(s,"charY",(function(){return V})),a.d(s,"walls",(function(){return Y})),a.d(s,"cpu",(function(){return K})),a.d(s,"checker",(function(){return Q})),a.d(s,"japaneseCurry",(function(){return Z})),a.d(s,"mosaic",(function(){return ee})),a.d(s,"arena",(function(){return te})),a.d(s,"reactor",(function(){return ae})),a.d(s,"sixeight",(function(){return se})),a.d(s,"spark",(function(){return ie})),a.d(s,"islands",(function(){return ne})),a.d(s,"galaxy",(function(){return re})),a.d(s,"triangle",(function(){return oe})),a.d(s,"iphonex",(function(){return ce})),a.d(s,"dealWithIt",(function(){return de})),a.d(s,"experiment",(function(){return ue})),a.d(s,"bigBoard",(function(){return le})),a.d(s,"twoBoard",(function(){return he})),a.d(s,"test1",(function(){return me})),a.d(s,"test2",(function(){return ge})),a.d(s,"test3",(function(){return pe})),a.d(s,"test4",(function(){return be})),a.d(s,"test5",(function(){return ve}));var i=a(0),n=a(3),r=a(1021),o=a(12);const c=!0,d=!1;class u{constructor(e,t){this.turn=c,this.prevPos=-1,this.prevColor=null,this.logs=[],this.put=this.put.bind(this),this.opts=t,null==this.opts.isLlotheo&&(this.opts.isLlotheo=!1),null==this.opts.canPutEverywhere&&(this.opts.canPutEverywhere=!1),null==this.opts.loopedBoard&&(this.opts.loopedBoard=!1),this.mapWidth=e[0].length,this.mapHeight=e.length;const a=e.join("");this.board=a.split("").map(e=>"-"===e?null:"b"===e?c:"w"===e?d:void 0),this.map=a.split("").map(e=>"-"===e||"b"===e||"w"===e?"empty":"null"),this.canPutSomewhere(c)||(this.turn=this.canPutSomewhere(d)?d:null)}get blackCount(){return Object(o.b)(c,this.board)}get whiteCount(){return Object(o.b)(d,this.board)}transformPosToXy(e){return[e%this.mapWidth,Math.floor(e/this.mapWidth)]}transformXyToPos(e,t){return e+t*this.mapWidth}put(e,t){this.prevPos=t,this.prevColor=e,this.board[t]=e;const a=this.effects(e,t);for(const t of a)this.board[t]=e;const s=this.turn;this.logs.push({color:e,pos:t,effects:a,turn:s}),this.calcTurn()}calcTurn(){this.turn=this.canPutSomewhere(!this.prevColor)?!this.prevColor:this.canPutSomewhere(this.prevColor)?this.prevColor:null}undo(){const e=this.logs.pop();this.prevColor=e.color,this.prevPos=e.pos,this.board[e.pos]=null;for(const t of e.effects){const e=this.board[t];this.board[t]=!e}this.turn=e.turn}mapDataGet(e){const[t,a]=this.transformPosToXy(e);return t<0||a<0||t>=this.mapWidth||a>=this.mapHeight?"null":this.map[e]}puttablePlaces(e){return Array.from(this.board.keys()).filter(t=>this.canPut(e,t))}canPutSomewhere(e){return this.puttablePlaces(e).length>0}canPut(e,t){return null===this.board[t]&&(this.opts.canPutEverywhere?"empty"==this.mapDataGet(t):0!==this.effects(e,t).length)}effects(e,t){const a=!e;return Object(o.a)([[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]].map(([s,i])=>{const n=(e,t)=>[e+s,t+i],r=[];let[o,c]=this.transformPosToXy(t);for(;;){if([o,c]=n(o,c),this.opts.loopedBoard&&this.transformXyToPos(o=(o%this.mapWidth+this.mapWidth)%this.mapWidth,c=(c%this.mapHeight+this.mapHeight)%this.mapHeight)==t)return r;if(-1==o||-1==c||o==this.mapWidth||c==this.mapHeight)return[];const s=this.transformXyToPos(o,c);if("null"===this.mapDataGet(s))return[];const i=this.board[s];if(null===i)return[];if(i===a&&r.push(s),i===e)return r}}))}get isEnded(){return null===this.turn}get winner(){return this.isEnded?this.blackCount==this.whiteCount?null:this.opts.isLlotheo===this.blackCount>this.whiteCount?d:c:void 0}}var l=a(6),h=a(2),m=a(8),g=i.default.extend({i18n:Object(n.a)("common/views/components/games/reversi/reversi.game.vue"),props:{initGame:{type:Object,require:!0},connection:{type:Object,require:!0},selfNav:{type:Boolean,require:!0}},data:()=>({game:null,o:null,logs:[],logPos:0,pollingClock:null,faAngleDoubleLeft:h.b,faAngleLeft:h.e,faAngleRight:h.f,faAngleDoubleRight:h.c,fasCircle:h.I,farCircle:m.e}),computed:{iAmPlayer(){return!!this.$store.getters.isSignedIn&&(this.game.user1Id==this.$store.state.i.id||this.game.user2Id==this.$store.state.i.id)},myColor(){return this.iAmPlayer?this.game.user1Id==this.$store.state.i.id&&1==this.game.black||this.game.user2Id==this.$store.state.i.id&&2==this.game.black:null},opColor(){return this.iAmPlayer?!0!==this.myColor:null},blackUser(){return 1==this.game.black?this.game.user1:this.game.user2},whiteUser(){return 1==this.game.black?this.game.user2:this.game.user1},turnUser(){return!0===this.o.turn?1==this.game.black?this.game.user1:this.game.user2:!1===this.o.turn?1==this.game.black?this.game.user2:this.game.user1:null},isMyTurn(){return!!this.iAmPlayer&&(null!=this.turnUser&&this.turnUser.id==this.$store.state.i.id)},cellsStyle(){return{"grid-template-rows":`repeat(${this.game.map.length}, 1fr)`,"grid-template-columns":`repeat(${this.game.map[0].length}, 1fr)`}}},watch:{logPos(e){if(this.game.isEnded){this.o=new u(this.game.map,{isLlotheo:this.game.isLlotheo,canPutEverywhere:this.game.canPutEverywhere,loopedBoard:this.game.loopedBoard});for(const t of this.logs.slice(0,e))this.o.put(t.color,t.pos);this.$forceUpdate()}}},created(){this.game=this.initGame,this.o=new u(this.game.map,{isLlotheo:this.game.isLlotheo,canPutEverywhere:this.game.canPutEverywhere,loopedBoard:this.game.loopedBoard});for(const e of this.game.logs)this.o.put(e.color,e.pos);this.logs=this.game.logs,this.logPos=this.logs.length,this.game.isStarted&&!this.game.isEnded&&(this.pollingClock=setInterval(()=>{if(this.game.isEnded)return;const e=r.str(this.logs.map(e=>e.pos.toString()).join(""));this.connection.send("check",{crc32:e})},3e3))},mounted(){this.connection.on("set",this.onSet),this.connection.on("rescue",this.onRescue),this.connection.on("ended",this.onEnded)},beforeDestroy(){this.connection.off("set",this.onSet),this.connection.off("rescue",this.onRescue),this.connection.off("ended",this.onEnded),clearInterval(this.pollingClock)},methods:{set(e){if(!this.game.isEnded&&this.iAmPlayer&&this.isMyTurn&&this.o.canPut(this.myColor,e)){if(this.o.put(this.myColor,e),this.$store.state.device.enableSounds){const e=new Audio(`${l.k}/assets/reversi-put-me.mp3`);e.volume=this.$store.state.device.soundVolume,e.play()}this.connection.send("set",{pos:e}),this.checkEnd(),this.$forceUpdate()}},onSet(e){if(this.logs.push(e),this.logPos++,this.o.put(e.color,e.pos),this.checkEnd(),this.$forceUpdate(),this.$store.state.device.enableSounds&&e.color!=this.myColor){const e=new Audio(`${l.k}/assets/reversi-put-you.mp3`);e.volume=this.$store.state.device.soundVolume,e.play()}},onEnded(e){this.game=e.game},checkEnd(){this.game.isEnded=this.o.isEnded,this.game.isEnded&&(!0===this.o.winner?(this.game.winnerId=1==this.game.black?this.game.user1Id:this.game.user2Id,this.game.winner=1==this.game.black?this.game.user1:this.game.user2):!1===this.o.winner?(this.game.winnerId=1==this.game.black?this.game.user2Id:this.game.user1Id,this.game.winner=1==this.game.black?this.game.user2:this.game.user1):(this.game.winnerId=null,this.game.winner=null))},onRescue(e){this.game=e,this.o=new u(this.game.map,{isLlotheo:this.game.isLlotheo,canPutEverywhere:this.game.canPutEverywhere,loopedBoard:this.game.loopedBoard});for(const e of this.game.logs)this.o.put(e.color,e.pos,!0);this.logs=this.game.logs,this.logPos=this.logs.length,this.checkEnd(),this.$forceUpdate()},surrender(){this.$root.api("games/reversi/games/surrender",{gameId:this.game.id})},goIndex(){this.$emit("go-index")}}}),p=(a(1022),a(1)),b=Object(p.a)(g,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"xqnhankfuuilcwvhgsopeqncafzsquya"},[e.selfNav?a("button",{staticClass:"go-index",on:{click:e.goIndex}},[a("fa",{attrs:{icon:"arrow-left"}})],1):e._e(),a("header",[a("b",[a("router-link",{attrs:{to:e._f("userPage")(e.blackUser)}},[a("mk-user-name",{attrs:{user:e.blackUser}})],1)],1),e._v("("+e._s(e.$t("@.reversi.black"))+") vs "),a("b",[a("router-link",{attrs:{to:e._f("userPage")(e.whiteUser)}},[a("mk-user-name",{attrs:{user:e.whiteUser}})],1)],1),e._v("("+e._s(e.$t("@.reversi.white"))+")")]),a("div",{staticStyle:{overflow:"hidden","line-height":"28px"}},[e.iAmPlayer||e.game.isEnded?e._e():a("p",{staticClass:"turn"},[a("mfm",{key:"turn:"+e.$options.filters.userName(e.turnUser),attrs:{text:e.$t("@.reversi.turn-of",{name:e.$options.filters.userName(e.turnUser)}),plain:!0,"custom-emojis":e.turnUser.emojis}}),a("mk-ellipsis")],1),e.logPos!=e.logs.length?a("p",{staticClass:"turn"},[a("mfm",{key:"past-turn-of:"+e.$options.filters.userName(e.turnUser),attrs:{text:e.$t("@.reversi.past-turn-of",{name:e.$options.filters.userName(e.turnUser)}),plain:!0,"custom-emojis":e.turnUser.emojis}})],1):e._e(),!e.iAmPlayer||e.game.isEnded||e.isMyTurn?e._e():a("p",{staticClass:"turn1"},[e._v(e._s(e.$t("@.reversi.opponent-turn"))),a("mk-ellipsis")],1),e.iAmPlayer&&!e.game.isEnded&&e.isMyTurn?a("p",{directives:[{name:"animate-css",rawName:"v-animate-css",value:{classes:"tada",iteration:"infinite"},expression:"{ classes: 'tada', iteration: 'infinite' }"}],staticClass:"turn2"},[e._v(e._s(e.$t("@.reversi.my-turn")))]):e._e(),e.game.isEnded&&e.logPos==e.logs.length?a("p",{staticClass:"result"},[e.game.winner?[a("mfm",{key:"won",attrs:{text:e.$t("@.reversi.won",{name:e.$options.filters.userName(e.game.winner)}),plain:!0,"custom-emojis":e.game.winner.emojis}}),null!=e.game.surrendered?a("span",[e._v(" ("+e._s(e.$t("surrendered"))+")")]):e._e()]:[e._v(e._s(e.$t("@.reversi.drawn")))]],2):e._e()]),a("div",{staticClass:"board"},[e.$store.state.settings.gamesReversiShowBoardLabels?a("div",{staticClass:"labels-x"},e._l(e.game.map[0].length,(function(t){return a("span",[e._v(e._s(String.fromCharCode(64+t)))])})),0):e._e(),a("div",{staticClass:"flex"},[e.$store.state.settings.gamesReversiShowBoardLabels?a("div",{staticClass:"labels-y"},e._l(e.game.map.length,(function(t){return a("div",[e._v(e._s(t))])})),0):e._e(),a("div",{staticClass:"cells",style:e.cellsStyle},e._l(e.o.board,(function(t,s){return a("div",{class:{empty:null==t,none:"null"==e.o.map[s],isEnded:e.game.isEnded,myTurn:!e.game.isEnded&&e.isMyTurn,can:e.turnUser?e.o.canPut(e.turnUser.id==e.blackUser.id,s):null,prev:e.o.prevPos==s},attrs:{title:""+String.fromCharCode(65+e.o.transformPosToXy(s)[0])+(e.o.transformPosToXy(s)[1]+1)},on:{click:function(t){return e.set(s)}}},[e.$store.state.settings.gamesReversiUseAvatarStones?[!0===t?a("img",{attrs:{src:e.blackUser.avatarUrl,alt:"black"}}):e._e(),!1===t?a("img",{attrs:{src:e.whiteUser.avatarUrl,alt:"white"}}):e._e()]:[!0===t?a("fa",{attrs:{icon:e.fasCircle}}):e._e(),!1===t?a("fa",{attrs:{icon:e.farCircle}}):e._e()]],2)})),0),this.$store.state.settings.gamesReversiShowBoardLabels?a("div",{staticClass:"labels-y"},e._l(e.game.map.length,(function(t){return a("div",[e._v(e._s(t))])})),0):e._e()]),this.$store.state.settings.gamesReversiShowBoardLabels?a("div",{staticClass:"labels-x"},e._l(e.game.map[0].length,(function(t){return a("span",[e._v(e._s(String.fromCharCode(64+t)))])})),0):e._e()]),a("p",{staticClass:"status"},[a("b",[e._v(e._s(e.$t("@.reversi.this-turn",{count:e.logPos})))]),e._v(" "+e._s(e.$t("@.reversi.black"))+":"+e._s(e.o.blackCount)+" "+e._s(e.$t("@.reversi.white"))+":"+e._s(e.o.whiteCount)+" "+e._s(e.$t("@.reversi.total"))+":"+e._s(e.o.blackCount+e.o.whiteCount))]),!e.game.isEnded&&e.iAmPlayer?a("div",{staticClass:"actions"},[a("form-button",{on:{click:e.surrender}},[e._v(e._s(e.$t("surrender")))])],1):e._e(),e.game.isEnded?a("div",{staticClass:"player"},[a("span",[e._v(e._s(e.logPos)+" / "+e._s(e.logs.length))]),a("ui-horizon-group",[a("ui-button",{attrs:{disabled:0==e.logPos},on:{click:function(t){e.logPos=0}}},[a("fa",{attrs:{icon:e.faAngleDoubleLeft}})],1),a("ui-button",{attrs:{disabled:0==e.logPos},on:{click:function(t){e.logPos--}}},[a("fa",{attrs:{icon:e.faAngleLeft}})],1),a("ui-button",{attrs:{disabled:e.logPos==e.logs.length},on:{click:function(t){e.logPos++}}},[a("fa",{attrs:{icon:e.faAngleRight}})],1),a("ui-button",{attrs:{disabled:e.logPos==e.logs.length},on:{click:function(t){e.logPos=e.logs.length}}},[a("fa",{attrs:{icon:e.faAngleDoubleRight}})],1)],1)],1):e._e(),a("div",{staticClass:"info"},[e.game.isLlotheo?a("p",[e._v(e._s(e.$t("is-llotheo")))]):e._e(),e.game.loopedBoard?a("p",[e._v(e._s(e.$t("looped-map")))]):e._e(),e.game.canPutEverywhere?a("p",[e._v(e._s(e.$t("can-put-everywhere")))]):e._e()])])}),[],!1,null,"b4c25402",null).exports;const v={name:"4x4",category:"4x4",data:["----","-wb-","-bw-","----"]},w={name:"6x6",category:"6x6",data:["------","------","--wb--","--bw--","------","------"]},f={name:"6x6 rounded",category:"6x6",author:"syuilo",data:[" ---- ","------","--wb--","--bw--","------"," ---- "]},x={name:"6x6 rounded 2",category:"6x6",author:"syuilo",data:["  --  "," ---- ","--wb--","--bw--"," ---- ","  --  "]},y={name:"8x8",category:"8x8",data:["--------","--------","--------","---wb---","---bw---","--------","--------","--------"]},k={name:"8x8 handicap 1",category:"8x8",data:["b-------","--------","--------","---wb---","---bw---","--------","--------","--------"]},_={name:"8x8 handicap 2",category:"8x8",data:["b-------","--------","--------","---wb---","---bw---","--------","--------","-------b"]},q={name:"8x8 handicap 3",category:"8x8",data:["b------b","--------","--------","---wb---","---bw---","--------","--------","-------b"]},z={name:"8x8 handicap 4",category:"8x8",data:["b------b","--------","--------","---wb---","---bw---","--------","--------","b------b"]},$={name:"8x8 handicap 12",category:"8x8",data:["bb----bb","b------b","--------","---wb---","---bw---","--------","b------b","bb----bb"]},C={name:"8x8 handicap 16",category:"8x8",data:["bbb---bb","b------b","-------b","---wb---","---bw---","b-------","b------b","bb---bbb"]},j={name:"8x8 handicap 20",category:"8x8",data:["bbb--bbb","b------b","b------b","---wb---","---bw---","b------b","b------b","bbb---bb"]},P={name:"8x8 handicap 28",category:"8x8",data:["bbbbbbbb","b------b","b------b","b--wb--b","b--bw--b","b------b","b------b","bbbbbbbb"]},S={name:"8x8 rounded",category:"8x8",author:"syuilo",data:[" ------ ","--------","--------","---wb---","---bw---","--------","--------"," ------ "]},A={name:"8x8 rounded 2",category:"8x8",author:"syuilo",data:["  ----  "," ------ ","--------","---wb---","---bw---","--------"," ------ ","  ----  "]},I={name:"8x8 rounded 3",category:"8x8",author:"syuilo",data:["   --   ","  ----  "," ------ ","---wb---","---bw---"," ------ ","  ----  ","   --   "]},E={name:"8x8 with notch",category:"8x8",author:"syuilo",data:["---  ---","--------","--------"," --wb-- "," --bw-- ","--------","--------","---  ---"]},T={name:"8x8 with some holes",category:"8x8",author:"syuilo",data:["--- ----","----- --","-- -----","---wb---","---bw- -"," -------","--- ----","--------"]},U={name:"Circle",category:"8x8",author:"syuilo",data:["   --   "," ------ "," ------ ","---wb---","---bw---"," ------ "," ------ ","   --   "]},B={name:"Smile",category:"8x8",author:"syuilo",data:[" ------ ","--------","-- -- --","---wb---","-- bw --","---  ---","--------"," ------ "]},O={name:"Window",category:"8x8",author:"syuilo",data:["--------","-  --  -","-  --  -","---wb---","---bw---","-  --  -","-  --  -","--------"]},L={name:"Reserved",category:"8x8",author:"Aya",data:["w------b","--------","--------","---wb---","---bw---","--------","--------","b------w"]},N={name:"X",category:"8x8",author:"Aya",data:["w------b","-w----b-","--w--b--","---wb---","---bw---","--b--w--","-b----w-","b------w"]},D={name:"Parallel",category:"8x8",author:"Aya",data:["--------","--------","--------","---bb---","---ww---","--------","--------","--------"]},M={name:"Lack of Black",category:"8x8",data:["--------","--------","--------","---w----","---bw---","--------","--------","--------"]},G={name:"Square Party",category:"8x8",author:"syuilo",data:["--------","-wwwbbb-","-w-wb-b-","-wwwbbb-","-bbbwww-","-b-bw-w-","-bbbwww-","--------"]},R={name:"Minesweeper",category:"8x8",author:"syuilo",data:["b-b--w-w","-w-wb-b-","w-b--w-b","-b-wb-w-","-w-bw-b-","b-w--b-w","-b-bw-w-","w-w--b-b"]},H={name:"10x10",category:"10x10",data:["----------","----------","----------","----------","----wb----","----bw----","----------","----------","----------","----------"]},X={name:"The Hole",category:"10x10",author:"syuilo",data:["----------","----------","--wb--wb--","--bw--bw--","----  ----","----  ----","--wb--wb--","--bw--bw--","----------","----------"]},F={name:"Grid",category:"10x10",author:"syuilo",data:["----------","- - -- - -","----------","- - -- - -","----wb----","----bw----","- - -- - -","----------","- - -- - -","----------"]},W={name:"Cross",category:"10x10",author:"Aya",data:["   ----   ","   ----   ","   ----   ","----------","----wb----","----bw----","----------","   ----   ","   ----   ","   ----   "]},J={name:"Char X",category:"10x10",author:"syuilo",data:["---    ---","----  ----","----------"," -------- ","  --wb--  ","  --bw--  "," -------- ","----------","----  ----","---    ---"]},V={name:"Char Y",category:"10x10",author:"syuilo",data:["---    ---","----  ----","----------"," -------- ","  --wb--  ","  --bw--  ","  ------  ","  ------  ","  ------  ","  ------  "]},Y={name:"Walls",category:"10x10",author:"Aya",data:[" bbbbbbbb ","w--------w","w--------w","w--------w","w---wb---w","w---bw---w","w--------w","w--------w","w--------w"," bbbbbbbb "]},K={name:"CPU",category:"10x10",author:"syuilo",data:[" b b  b b ","w--------w"," -------- ","w--------w"," ---wb--- "," ---bw--- ","w--------w"," -------- ","w--------w"," b b  b b "]},Q={name:"Checker",category:"10x10",author:"Aya",data:["----------","----------","----------","---wbwb---","---bwbw---","---wbwb---","---bwbw---","----------","----------","----------"]},Z={name:"Japanese curry",category:"10x10",author:"syuilo",data:["w-b-b-b-b-","-w-b-b-b-b","w-w-b-b-b-","-w-w-b-b-b","w-w-wwb-b-","-w-wbb-b-b","w-w-w-b-b-","-w-w-w-b-b","w-w-w-w-b-","-w-w-w-w-b"]},ee={name:"Mosaic",category:"10x10",author:"syuilo",data:["- - - - - "," - - - - -","- - - - - "," - w w - -","- - b b - "," - w w - -","- - b b - "," - - - - -","- - - - - "," - - - - -"]},te={name:"Arena",category:"10x10",author:"syuilo",data:["- - -- - -"," - -  - - ","- ------ -"," -------- ","- --wb-- -","- --bw-- -"," -------- ","- ------ -"," - -  - - ","- - -- - -"]},ae={name:"Reactor",category:"10x10",author:"syuilo",data:["-w------b-","b- -  - -w","- --wb-- -","---b  w---","- b wb w -","- w bw b -","---w  b---","- --bw-- -","w- -  - -b","-b------w-"]},se={name:"6x8",category:"Special",data:["------","------","------","--wb--","--bw--","------","------","------"]},ie={name:"Spark",category:"Special",author:"syuilo",data:[" -      - ","----------"," -------- "," -------- "," ---wb--- "," ---bw--- "," -------- "," -------- ","----------"," -      - "]},ne={name:"Islands",category:"Special",author:"syuilo",data:["--------  ","---wb---  ","---bw---  ","--------  ","  -    -  ","  -    -  ","  --------","  --------","  --------","  --------"]},re={name:"Galaxy",category:"Special",author:"syuilo",data:["   ------   ","  --www---  "," ------w--- ","---bbb--w---","--b---b-w-b-","-b--wwb-w-b-","-b-w-bww--b-","-b-w-b---b--","---w--bbb---"," ---w------ ","  ---www--  ","   ------   "]},oe={name:"Triangle",category:"Special",author:"syuilo",data:["    --    ","    --    ","   ----   ","   ----   ","  --wb--  ","  --bw--  "," -------- "," -------- ","----------","----------"]},ce={name:"iPhone X",category:"Special",author:"syuilo",data:[" --  -- ","--------","--------","--------","--------","---wb---","---bw---","--------","--------","--------","--------"," ------ "]},de={name:"Deal with it!",category:"Special",author:"syuilo",data:["------------","--w-b-------"," --b-w------","  --w-b---- ","   -------  "]},ue={name:"Let's experiment",category:"Special",author:"syuilo",data:[" ------------ ","------wb------","------bw------","--------------","    -    -    ","------  ------","bbbbbb  wwwwww","bbbbbb  wwwwww","bbbbbb  wwwwww","bbbbbb  wwwwww","wwwwww  bbbbbb"]},le={name:"Big board",category:"Special",data:["----------------","----------------","----------------","----------------","----------------","----------------","----------------","-------wb-------","-------bw-------","----------------","----------------","----------------","----------------","----------------","----------------","----------------"]},he={name:"Two board",category:"Special",author:"Aya",data:["-------- --------","-------- --------","-------- --------","---wb--- ---wb---","---bw--- ---bw---","-------- --------","-------- --------","-------- --------"]},me={name:"Test1",category:"Test",data:["--------","---wb---","---bw---","--------"]},ge={name:"Test2",category:"Test",data:["------","------","-b--w-","-w--b-","-w--b-"]},pe={name:"Test3",category:"Test",data:["-w-","--w","w--","-w-","--w","w--","-w-","--w","w--","-w-","---","b--"]},be={name:"Test4",category:"Test",data:["-w--b-","-w--b-","------","-w--b-","-w--b-"]},ve={name:"Test5",category:"Test",data:["--wwwwww--","--wwwbwwww","-bwwbwbwww","-bwwwbwbww","-bwwbwbwbw","-bwbwbwb-w","bwbwwbbb-w","w-wbbbbb--","--w-b-w---","----------"]};var we=i.default.extend({i18n:Object(n.a)("common/views/components/games/reversi/reversi.room.vue"),props:["game","connection"],data:()=>({o:null,isLlotheo:!1,mapName:y.name,maps:s,form:null,messages:[],fasCircle:h.I,farCircle:m.e}),computed:{mapCategories(){const e=Object.values(s).map(e=>e.category);return e.filter((t,a)=>e.indexOf(t)==a)},isAccepted(){return!(this.game.user1Id!=this.$store.state.i.id||!this.game.user1Accepted)||!(this.game.user2Id!=this.$store.state.i.id||!this.game.user2Accepted)},isOpAccepted(){return!(this.game.user1Id==this.$store.state.i.id||!this.game.user1Accepted)||!(this.game.user2Id==this.$store.state.i.id||!this.game.user2Accepted)}},created(){this.connection.on("changeAccepts",this.onChangeAccepts),this.connection.on("updateSettings",this.onUpdateSettings),this.connection.on("initForm",this.onInitForm),this.connection.on("message",this.onMessage),this.game.user1Id!=this.$store.state.i.id&&this.game.form1&&(this.form=this.game.form1),this.game.user2Id!=this.$store.state.i.id&&this.game.form2&&(this.form=this.game.form2)},beforeDestroy(){this.connection.off("changeAccepts",this.onChangeAccepts),this.connection.off("updateSettings",this.onUpdateSettings),this.connection.off("initForm",this.onInitForm),this.connection.off("message",this.onMessage)},methods:{exit(){},accept(){this.connection.send("accept",{})},cancel(){this.connection.send("cancelAccept",{})},onChangeAccepts(e){this.game.user1Accepted=e.user1,this.game.user2Accepted=e.user2,this.$forceUpdate()},updateSettings(e){this.connection.send("updateSettings",{key:e,value:this.game[e]})},onUpdateSettings({key:e,value:t}){if(this.game[e]=t,null==this.game.map)this.mapName=null;else{const e=Object.values(s).find(e=>e.data.join("")==this.game.map.join(""));this.mapName=e?e.name:"-Custom-"}},onInitForm(e){e.userId!=this.$store.state.i.id&&(this.form=e.form)},onMessage(e){e.userId!=this.$store.state.i.id&&this.messages.unshift(e.message)},onChangeForm(e){this.connection.send("updateForm",{id:e.id,value:e.value})},onMapChange(){null==this.mapName?this.game.map=null:this.game.map=Object.values(s).find(e=>e.name==this.mapName).data,this.$forceUpdate(),this.updateSettings("map")},onPixelClick(e,t){const a=e%this.game.map[0].length,s=Math.floor(e/this.game.map[0].length),i=" "==t?"-":"-"==t?"b":"b"==t?"w":" ",n=this.game.map[s].split("");n[a]=i,this.$set(this.game.map,s,n.join("")),this.$forceUpdate(),this.updateSettings("map")}}}),fe=(a(1024),Object(p.a)(we,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"urbixznjwwuukfsckrwzwsqzsxornqij"},[a("header",[a("b",[a("mk-user-name",{attrs:{user:e.game.user1}})],1),e._v(" vs "),a("b",[a("mk-user-name",{attrs:{user:e.game.user2}})],1)]),a("div",[a("p",[e._v(e._s(e.$t("settings-of-the-game")))]),a("div",{staticClass:"card map"},[a("header",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.mapName,expression:"mapName"}],attrs:{placeholder:e.$t("choose-map")},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.mapName=t.target.multiple?a:a[0]},e.onMapChange]}},["-Custom-"==e.mapName?a("option",{attrs:{label:"-Custom-"},domProps:{value:e.mapName}}):e._e(),a("option",{attrs:{label:e.$t("random")},domProps:{value:null}}),e._l(e.mapCategories,(function(t){return a("optgroup",{key:t,attrs:{label:t}},e._l(e.maps,(function(s){return s.category==t?a("option",{key:s.name,attrs:{label:s.name},domProps:{value:s.name}},[e._v(e._s(s.name))]):e._e()})),0)}))],2)]),a("div",[null==e.game.map?a("div",{staticClass:"random"},[a("fa",{attrs:{icon:"dice"}})],1):a("div",{staticClass:"board",style:{"grid-template-rows":"repeat("+e.game.map.length+", 1fr)","grid-template-columns":"repeat("+e.game.map[0].length+", 1fr)"}},e._l(e.game.map.join(""),(function(t,s){return a("div",{attrs:{"data-none":" "==t},on:{click:function(a){return e.onPixelClick(s,t)}}},["b"==t?a("fa",{attrs:{icon:e.fasCircle}}):e._e(),"w"==t?a("fa",{attrs:{icon:e.farCircle}}):e._e()],1)})),0)])]),a("div",{staticClass:"card"},[a("header",[a("span",[e._v(e._s(e.$t("black-or-white")))])]),a("div",[a("form-radio",{attrs:{value:"random"},on:{change:function(t){return e.updateSettings("bw")}},model:{value:e.game.bw,callback:function(t){e.$set(e.game,"bw",t)},expression:"game.bw"}},[e._v(e._s(e.$t("random")))]),a("form-radio",{attrs:{value:1},on:{change:function(t){return e.updateSettings("bw")}},model:{value:e.game.bw,callback:function(t){e.$set(e.game,"bw",t)},expression:"game.bw"}},[e._v(e._s(this.$t("black-is").split("{}")[0])),a("b",[a("mk-user-name",{attrs:{user:e.game.user1}})],1),e._v(e._s(this.$t("black-is").split("{}")[1]))]),a("form-radio",{attrs:{value:2},on:{change:function(t){return e.updateSettings("bw")}},model:{value:e.game.bw,callback:function(t){e.$set(e.game,"bw",t)},expression:"game.bw"}},[e._v(e._s(this.$t("black-is").split("{}")[0])),a("b",[a("mk-user-name",{attrs:{user:e.game.user2}})],1),e._v(e._s(this.$t("black-is").split("{}")[1]))])],1)]),a("div",{staticClass:"card"},[a("header",[a("span",[e._v(e._s(e.$t("rules")))])]),a("div",[a("ui-switch",{on:{change:function(t){return e.updateSettings("isLlotheo")}},model:{value:e.game.isLlotheo,callback:function(t){e.$set(e.game,"isLlotheo",t)},expression:"game.isLlotheo"}},[e._v(e._s(e.$t("is-llotheo")))]),a("ui-switch",{on:{change:function(t){return e.updateSettings("loopedBoard")}},model:{value:e.game.loopedBoard,callback:function(t){e.$set(e.game,"loopedBoard",t)},expression:"game.loopedBoard"}},[e._v(e._s(e.$t("looped-map")))]),a("ui-switch",{on:{change:function(t){return e.updateSettings("canPutEverywhere")}},model:{value:e.game.canPutEverywhere,callback:function(t){e.$set(e.game,"canPutEverywhere",t)},expression:"game.canPutEverywhere"}},[e._v(e._s(e.$t("can-put-everywhere")))])],1)]),e.form?a("div",{staticClass:"card form"},[a("header",[a("span",[e._v(e._s(e.$t("settings-of-the-bot")))])]),a("div",[e._l(e.form,(function(t){return["switch"==t.type?a("ui-switch",{key:t.id,on:{change:function(a){return e.onChangeForm(t)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},[e._v(e._s(t.label||t.desc||""))]):e._e(),"radio"==t.type?a("div",{key:t.id,staticClass:"card"},[a("header",[a("span",[e._v(e._s(t.label))])]),a("div",e._l(t.items,(function(s,i){return a("form-radio",{key:t.id+":"+i,attrs:{value:s.value},on:{change:function(a){return e.onChangeForm(t)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},[e._v(e._s(s.label))])})),1)]):e._e(),"slider"==t.type?a("div",{key:t.id,staticClass:"card"},[a("header",[a("span",[e._v(e._s(t.label))])]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],attrs:{type:"range",min:t.min,max:t.max,step:t.step||1},domProps:{value:t.value},on:{change:function(a){return e.onChangeForm(t)},__r:function(a){return e.$set(t,"value",a.target.value)}}})])]):e._e(),"textbox"==t.type?a("div",{key:t.id,staticClass:"card"},[a("header",[a("span",[e._v(e._s(t.label))])]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],domProps:{value:t.value},on:{change:function(a){return e.onChangeForm(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})])]):e._e()]}))],2)]):e._e()]),a("footer",[a("p",{staticClass:"status"},[e.isAccepted&&e.isOpAccepted?[e._v(e._s(e.$t("this-game-is-started-soon"))),a("mk-ellipsis")]:e._e(),e.isAccepted&&!e.isOpAccepted?[e._v(e._s(e.$t("waiting-for-other"))),a("mk-ellipsis")]:e._e(),!e.isAccepted&&e.isOpAccepted?[e._v(e._s(e.$t("waiting-for-me")))]:e._e(),e.isAccepted||e.isOpAccepted?e._e():[e._v(e._s(e.$t("waiting-for-both"))),a("mk-ellipsis")]],2),a("div",{staticClass:"actions"},[a("form-button",{on:{click:e.exit}},[e._v(e._s(e.$t("cancel")))]),e.isAccepted?e._e():a("form-button",{attrs:{primary:""},on:{click:e.accept}},[e._v(e._s(e.$t("ready")))]),e.isAccepted?a("form-button",{attrs:{primary:""},on:{click:e.cancel}},[e._v(e._s(e.$t("cancel-ready")))]):e._e()],1)])])}),[],!1,null,"6947c1ac",null).exports),xe=i.default.extend({i18n:Object(n.a)("common/views/components/games/reversi/reversi.gameroom.vue"),components:{XGame:b,XRoom:fe},props:{game:{type:Object,required:!0},selfNav:{type:Boolean,require:!0}},data:()=>({connection:null,g:null}),created(){this.g=this.game,this.connection=this.$root.stream.connectToChannel("gamesReversiGame",{gameId:this.game.id}),this.connection.on("started",this.onStarted)},beforeDestroy(){this.connection.dispose()},methods:{onStarted(e){Object.assign(this.g,e),this.$forceUpdate()},goIndex(){this.$emit("go-index")}}}),ye=Object(p.a)(xe,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[this.g.isStarted?t("x-game",{attrs:{"init-game":this.g,connection:this.connection,"self-nav":this.selfNav},on:{"go-index":this.goIndex}}):t("x-room",{attrs:{game:this.g,connection:this.connection}})],1)}),[],!1,null,null,null).exports,ke=i.default.extend({i18n:Object(n.a)("common/views/components/games/reversi/reversi.index.vue"),data:()=>({games:[],gamesFetching:!0,gamesMoreFetching:!1,myGames:[],matching:null,invitations:[],connection:null}),mounted(){this.$store.getters.isSignedIn&&(this.connection=this.$root.stream.useSharedConnection("gamesReversi"),this.connection.on("invited",this.onInvited),this.$root.api("games/reversi/games",{my:!0}).then(e=>{this.myGames=e}),this.$root.api("games/reversi/invitations").then(e=>{this.invitations=this.invitations.concat(e)})),this.$root.api("games/reversi/games").then(e=>{this.games=e,this.gamesFetching=!1})},beforeDestroy(){this.connection&&this.connection.dispose()},methods:{go(e){this.$emit("go",e)},async match(){const{result:e}=await this.$root.dialog({title:this.$t("enter-username"),user:{local:!0}});null!=e&&this.$root.api("games/reversi/match",{userId:e.id}).then(t=>{null==t?this.$emit("matching",e):this.$emit("go",t)})},accept(e){this.$root.api("games/reversi/match",{userId:e.parent.id}).then(e=>{e&&this.$emit("go",e)})},onInvited(e){this.invitations.unshift(e)}}}),_e=(a(1026),Object(p.a)(ke,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"phgnkghfpyvkrvwiajkiuoxyrdaqpzcx"},[a("h1",[e._v(e._s(e.$t("title")))]),a("p",[e._v(e._s(e.$t("sub-title")))]),a("div",{staticClass:"play"},[a("form-button",{attrs:{primary:"",round:""},on:{click:e.match}},[e._v(e._s(e.$t("invite")))]),a("details",[a("summary",[e._v(e._s(e.$t("rule")))]),a("div",[a("p",[e._v(e._s(e.$t("rule-desc")))]),a("dl",[a("dt",[a("b",[e._v(e._s(e.$t("mode-invite")))])]),a("dd",[e._v(e._s(e.$t("mode-invite-desc")))])])])])],1),e.invitations.length>0?a("section",[a("h2",[e._v(e._s(e.$t("invitations")))]),e._l(e.invitations,(function(t){return a("div",{staticClass:"invitation",attrs:{tabindex:"-1"},on:{click:function(a){return e.accept(t)}}},[a("mk-avatar",{staticClass:"avatar",attrs:{user:t.parent}}),a("span",{staticClass:"name"},[a("b",[a("mk-user-name",{attrs:{user:t.parent}})],1)]),a("span",{staticClass:"username"},[e._v("@"+e._s(t.parent.username))]),a("mk-time",{attrs:{time:t.createdAt}})],1)}))],2):e._e(),e.myGames.length>0?a("section",[a("h2",[e._v(e._s(e.$t("my-games")))]),e._l(e.myGames,(function(t){return a("a",{staticClass:"game",attrs:{tabindex:"-1",href:"/games/reversi/"+t.id},on:{click:function(a){return a.preventDefault(),e.go(t)}}},[a("mk-avatar",{staticClass:"avatar",attrs:{user:t.user1}}),a("mk-avatar",{staticClass:"avatar",attrs:{user:t.user2}}),a("span",[a("b",[a("mk-user-name",{attrs:{user:t.user1}})],1),e._v(" vs "),a("b",[a("mk-user-name",{attrs:{user:t.user2}})],1)]),a("span",{staticClass:"state"},[e._v(e._s(t.isEnded?e.$t("game-state.ended"):e.$t("game-state.playing")))]),a("mk-time",{attrs:{time:t.createdAt}})],1)}))],2):e._e(),e.games.length>0?a("section",[a("h2",[e._v(e._s(e.$t("all-games")))]),e._l(e.games,(function(t){return a("a",{staticClass:"game",attrs:{tabindex:"-1",href:"/games/reversi/"+t.id},on:{click:function(a){return a.preventDefault(),e.go(t)}}},[a("mk-avatar",{staticClass:"avatar",attrs:{user:t.user1}}),a("mk-avatar",{staticClass:"avatar",attrs:{user:t.user2}}),a("span",[a("b",[a("mk-user-name",{attrs:{user:t.user1}})],1),e._v(" vs "),a("b",[a("mk-user-name",{attrs:{user:t.user2}})],1)]),a("span",{staticClass:"state"},[e._v(e._s(t.isEnded?e.$t("game-state.ended"):e.$t("game-state.playing")))]),a("mk-time",{attrs:{time:t.createdAt}})],1)}))],2):e._e()])}),[],!1,null,"41d0f9a8",null).exports),qe=a(23),ze=i.default.extend({i18n:Object(n.a)("common/views/components/games/reversi/reversi.vue"),components:{XGameroom:ye,XIndex:_e},props:{gameId:{type:String,required:!1},selfNav:{type:Boolean,require:!1,default:!0}},data:()=>({game:null,matching:null,connection:null,pingClock:null}),watch:{game(){this.$emit("gamed",this.game)},gameId(){this.fetch()}},mounted(){this.fetch(),this.$store.getters.isSignedIn&&(this.connection=this.$root.stream.useSharedConnection("gamesReversi"),this.connection.on("matched",this.onMatched),this.pingClock=setInterval(()=>{this.matching&&this.connection.send("ping",{id:this.matching.id})},3e3))},beforeDestroy(){this.connection&&(this.connection.dispose(),clearInterval(this.pingClock))},methods:{fetch(){null==this.gameId?this.game=null:(qe.a.start(),this.$root.api("games/reversi/games/show",{gameId:this.gameId}).then(e=>{this.game=e,qe.a.done()}))},async nav(e,t=!0){this.selfNav?(null!=e&&null==e.map&&(e=await this.$root.api("games/reversi/games/show",{gameId:e.id})),this.game=e):this.$emit("nav",e,t)},onMatching(e){this.matching=e},cancel(){this.matching=null,this.$root.api("games/reversi/match/cancel")},accept(e){this.$root.api("games/reversi/match",{userId:e.parent.id}).then(e=>{e&&(this.matching=null,this.nav(e))})},onMatched(e){this.matching=null,this.game=e,this.nav(e,!1)},goIndex(){this.nav(null)}}}),$e=(a(1028),Object(p.a)(ze,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"vchtoekanapleubgzioubdtmlkribzfd"},[e.game?a("div",[a("x-gameroom",{attrs:{game:e.game,"self-nav":e.selfNav},on:{"go-index":e.goIndex}})],1):e.matching?a("div",{staticClass:"matching"},[a("h1",[e._v(e._s(this.$t("matching.waiting-for").split("{}")[0])),a("b",[a("mk-user-name",{attrs:{user:e.matching}})],1),e._v(e._s(this.$t("matching.waiting-for").split("{}")[1])),a("mk-ellipsis")],1),a("div",{staticClass:"cancel"},[a("form-button",{attrs:{round:""},on:{click:e.cancel}},[e._v(e._s(e.$t("matching.cancel")))])],1)]):e.gameId?a("div",[e._v("\n\t\t...\n\t")]):a("div",{staticClass:"index"},[a("x-index",{on:{go:e.nav,matching:e.onMatching}})],1)])}),[],!1,null,"380d0288",null));t.default=$e.exports},771:function(e,t,a){var s=a(1023);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a(5).default)("aac3f27c",s,!0,{})},772:function(e,t,a){var s=a(1025);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a(5).default)("59c54e40",s,!0,{})},773:function(e,t,a){var s=a(1027);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a(5).default)("ae6d72d2",s,!0,{})},774:function(e,t,a){var s=a(1029);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,a(5).default)("2b763a42",s,!0,{})}}]);
//# sourceMappingURL=19.11.37.1.js.map